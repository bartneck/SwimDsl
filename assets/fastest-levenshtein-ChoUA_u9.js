const d=new Uint32Array(65536),_=(n,s)=>{const l=n.length,p=s.length,A=1<<l-1;let c=-1,i=0,x=l,o=l;for(;o--;)d[n.charCodeAt(o)]|=1<<o;for(o=0;o<p;o++){let f=d[s.charCodeAt(o)];const m=f|i;f|=(f&c)+c^c,i|=~(f|c),c&=f,i&A&&x++,c&A&&x--,i=i<<1|1,c=c<<1|~(m|i),i&=m}for(o=l;o--;)d[n.charCodeAt(o)]=0;return x},j=(n,s)=>{const l=s.length,p=n.length,A=[],c=[],i=Math.ceil(l/32),x=Math.ceil(p/32);for(let t=0;t<i;t++)c[t]=-1,A[t]=0;let o=0;for(;o<x-1;o++){let t=0,r=-1;const C=o*32,g=Math.min(32,p)+C;for(let e=C;e<g;e++)d[n.charCodeAt(e)]|=1<<e;for(let e=0;e<l;e++){const a=d[s.charCodeAt(e)],v=c[e/32|0]>>>e&1,h=A[e/32|0]>>>e&1,y=a|t,z=((a|h)&r)+r^r|a|h;let u=t|~(z|r),q=r&z;u>>>31^v&&(c[e/32|0]^=1<<e),q>>>31^h&&(A[e/32|0]^=1<<e),u=u<<1|v,q=q<<1|h,r=q|~(y|u),t=u&y}for(let e=C;e<g;e++)d[n.charCodeAt(e)]=0}let f=0,m=-1;const k=o*32,w=Math.min(32,p-k)+k;for(let t=k;t<w;t++)d[n.charCodeAt(t)]|=1<<t;let M=p;for(let t=0;t<l;t++){const r=d[s.charCodeAt(t)],C=c[t/32|0]>>>t&1,g=A[t/32|0]>>>t&1,e=r|f,a=((r|g)&m)+m^m|r|g;let v=f|~(a|m),h=m&a;M+=v>>>p-1&1,M-=h>>>p-1&1,v>>>31^C&&(c[t/32|0]^=1<<t),h>>>31^g&&(A[t/32|0]^=1<<t),v=v<<1|C,h=h<<1|g,m=h|~(e|v),f=v&e}for(let t=k;t<w;t++)d[n.charCodeAt(t)]=0;return M},U=(n,s)=>{if(n.length<s.length){const l=s;s=n,n=l}return s.length===0?n.length:n.length<=32?_(n,s):j(n,s)};export{U as d};
